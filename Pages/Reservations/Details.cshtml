@page "{id:int}"
@model StayTrackPro.Pages.Reservations.DetailsModel
@{
    ViewData["Title"] = "Reservation Details";
}

<div class="container mt-4">
    <h2 class="mb-4">Reservation Details</h2>

    <dl class="row">
        <dt class="col-sm-3">Guest Name</dt>
        <dd class="col-sm-9">@Model.Reservation.GuestFullName</dd>

        <dt class="col-sm-3">Suite Type</dt>
        <dd class="col-sm-9">
            @StayTrackPro.Data.AppMemoryContext.Suites
                .FirstOrDefault(s => s.Id == Model.Reservation.SuiteId)?.Type ?? "Unknown"
        </dd>

        <dt class="col-sm-3">Arrival Date</dt>
        <dd class="col-sm-9">@Model.Reservation.ArrivalDate.ToShortDateString()</dd>

        <dt class="col-sm-3">Departure Date</dt>
        <dd class="col-sm-9">@Model.Reservation.DepartureDate.ToShortDateString()</dd>
    </dl>

    @if (Model.Reservation.SpecialRequests.Any())
    {
        <h5 class="mt-4">Special Requests</h5>
        <ul class="list-group mb-4">
            @foreach (var request in Model.Reservation.SpecialRequests)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    @request.Content
                    <form method="post" asp-route-id="@Model.Reservation.Id" asp-route-deleteRequestId="@request.Id" class="ms-2">
                        <button type="submit" class="btn btn-sm btn-danger" title="Delete">
                            <i class="bi bi-x"></i>
                        </button>
                    </form>
                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-muted mt-4">No special requests.</p>
    }

    <h5 class="mt-4">Add Special Request</h5>
    <form method="post">
        <div class="input-group mb-3">
            <input type="text" name="newRequest" class="form-control" placeholder="Enter request..." required />
            <button type="submit" class="btn btn-outline-primary">Add</button>
        </div>
    </form>

    <a asp-page="Index" class="btn btn-outline-primary mt-3">Back to List</a>
</div>
